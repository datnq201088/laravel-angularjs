!function(){"use strict";angular.module("app",["app.core","app.header","app.login","app.landing","app.user","app.chat"])}(),function(){"use strict";angular.module("app.chat",["app.core"])}(),function(){"use strict";angular.module("app.core",["ui.router","ngStorage","btford.socket-io"])}(),function(){"use strict";angular.module("app.header",["app.core"])}(),function(){"use strict";angular.module("app.landing",["app.core"])}(),function(){"use strict";angular.module("app.login",["app.core"])}(),function(){"use strict";angular.module("app.user",["app.core"])}(),function(){"use strict";function e(e){e.html5Mode(!0)}function t(e,t,r,n,o){r.currentUser&&(e.defaults.headers.common.Authorization="Bearer "+r.currentUser.token,o.updateCurrentUser(r.currentUser.token,r.currentUser.username)),t.$on("$stateChangeStart",function(e,t,r,a,u,s){"login"==t.name||"landing"==t.name||o.isAuthenticated()||(console.log("stop"),e.preventDefault(),n.go("login"))})}angular.module("app").config(e).run(t),e.$inject=["$locationProvider"],t.$inject=["$http","$rootScope","$localStorage","$state","AuthService"]}(),function(){"use strict";function e(e,t){t.otherwise("/landing"),e.state("chat",{url:"/chat",templateUrl:"views/app/chat/chat.html",controller:"ChatController",controllerAs:"vm"})}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.chat").config(e)}(),function(){"use strict";function e(e,t,r,n){function o(){return!!r.currentUser&&void n.emit("user_join",r.currentUser.username)}function a(){n.on("new_user_join",function(e){console.log("new_user"),console.log(e)})}function u(){n.emit("send_message",s.text),s.messages.push({username:r.currentUser.username,text:s.text}),s.text=""}var s=this;s.messages=[],s.text="",s.sendMsg=u,o(),a(),n.on("receive_message",function(e){console.log(e),s.messages.push(e)})}function t(e){var t=this;t.data=e.data}function r(e){function t(){e.update({fistname:"Nguyen Quoc ",lastname:"Dat"})}var r=this;r.data=e.data,r.update=t}angular.module("app.chat").controller("ChatController",e).controller("TestController",t).controller("DataController",r),e.$inject=["$state","$http","$localStorage","socket"],t.$inject=["ShareService"],r.$inject=["ShareService"]}(),function(){"use strict";function e(e,t){var r={};return r}angular.module("app.chat").factory("ChatService",e),e.$inject=["$http","$localStorage"]}(),function(){"use strict";function e(e){var t=io.connect("http://localhost:9000"),r=e({ioSocket:t});return r}e.$inject=["socketFactory"],angular.module("app.chat").factory("socket",e)}(),function(){"use strict";function e(e,t){function r(r,n){return e.post("/api/v1/login",{email:r,password:n}).then(function(r,n,a,u){var s=r.data;console.log(s),s.status&&(e.defaults.headers.common.Authorization="Bearer "+s.data.token,t.currentUser={username:s.data.name,token:s.data.token},o.currentUser.token=s.data.token,o.currentUser.username=s.data.name,console.log("1"))})}function n(){e.defaults.headers.common.Authorization=null,t.currentUser=null,o.currentUser.token=null,o.currentUser.username=null}var o={currentUser:{token:null,username:null},login:r,logout:n,updateCurrentUser:function(e,t){this.currentUser.token=e,this.currentUser.username=t},isAuthenticated:function(){return!!this.currentUser.token}};return o}angular.module("app.core").factory("AuthService",e),e.$inject=["$http","$localStorage"]}(),function(){"use strict";angular.module("app.core").directive("myEnter",function(){return function(e,t,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(r.myEnter)}),console.log("enter enter"),t.preventDefault())})}})}(),function(){"use strict";function e(){return{data:{firstname:"Firstname ",lastname:"Lastname"},update:function(e){this.data=e}}}angular.module("app.core").factory("ShareService",e)}(),function(){"use strict";function e(e){function t(){e.logout(),$statel.go("landing")}var r=this;r.currentUser=e.currentUser,console.log(r.currentUser),r.logout=t}angular.module("app.header").controller("HeaderController",e),e.$inject=["AuthService"]}(),function(){"use strict";function e(e,t){e.state("landing",{url:"/landing",templateUrl:"views/app/landing/landing.html",controller:"LandingController",controllerAs:"vm"})}angular.module("app.landing").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(){console.log("landing")}angular.module("app.landing").controller("LandingController",e),e.$inject=[]}(),function(){"use strict";function e(e,t){t.otherwise("/landing"),e.state("login",{url:"/login",templateUrl:"views/app/login/login.html",controller:"LoginController",controllerAs:"vm"})}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app.login").config(e)}(),function(){"use strict";function e(e,t,r){function n(){r.login(o.email,o.password).then(function(t,n,o,a){if(console.log("2"),r.isAuthenticated)return e.go("users.list")},function(e){alert(e)})}var o=this;o.email="",o.password="",o.login=n}angular.module("app.login").controller("LoginController",e),e.$inject=["$state","$http","AuthService"]}(),function(){"use strict";function e(e,t){function r(){t.addUser(n.user).then(function(t){var r=t.data;r.status&&e.go("users.list")},function(e){})}var n=this;n.user={email:"",name:"",password:""},n.addUser=r}angular.module("app.user").controller("UserAddController",e),e.$inject=["$state","UserService"]}(),function(){"use strict";function e(e,t,r){function n(){return!u.loaded&&(u.loaded=!0,r.getList().then(function(e){var t=e.data;t.status?u.users=t.data:u.error=t.mesage}))}function o(e){var t=u.users[e].id;return r.deleteUser(t).then(function(t){var r=t.data;return r.status&&(alert("Delete success"),delete u.users[e]),u.users})}function a(){return e.go("users.add")}var u=this;u.users=[],u.error="",u.loaded=!1,u.deleteUser=o,u.addUser=a,n()}angular.module("app.user").controller("UserListController",e),e.$inject=["$state","$localStorage","UserService"]}(),function(){"use strict";function e(e,t){t.otherwise("/landing"),e.state("users",{url:"/users",abstract:!0,templateUrl:"views/app/user/users.html",controller:"UsersController",controllerAs:"vm"}).state("users.add",{url:"/add",templateUrl:"views/app/user/user-add.html",controller:"UserAddController",controllerAs:"vm"}).state("users.list",{url:"",templateUrl:"views/app/user/user-list.html",controller:"UserListController",controllerAs:"vm"}).state("users.detail",{url:"/detail/:id",templateUrl:"views/app/user/user-detail.html",controller:"UserDetailController",controllerAs:"vm"})}angular.module("app.user").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t){function r(t){return e.get("/api/v1/users/"+t)}function n(){return e.get("/api/v1/users")}function o(t){return e.delete("/api/v1/users/"+t)}function a(t){return e.post("/api/v1/users",t)}var u={getUserInfo:r,getList:n,deleteUser:o,addUser:a};return u}angular.module("app.user").factory("UserService",e),e.$inject=["$http","$localStorage"]}(),function(){"use strict";function e(e){}angular.module("app.user").controller("UsersController",e),e.$inject=["$localStorage"]}();